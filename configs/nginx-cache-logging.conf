# ISP SaaS Cache - Nginx Logging Format for Cache Statistics
# Include this in your nginx.conf http block

# Custom log format that includes cache status
# $upstream_cache_status values: HIT, MISS, BYPASS, EXPIRED, STALE, UPDATING, REVALIDATED
log_format cache_log '$remote_addr - $remote_user [$time_local] '
                     '"$request" $status $body_bytes_sent '
                     '"$http_referer" "$http_user_agent" '
                     'cache_status=$upstream_cache_status '
                     'rt=$request_time uct=$upstream_connect_time';

# Alternative format with X-Cache-Status header (for compatibility)
log_format cache_extended '$remote_addr - $remote_user [$time_local] '
                          '"$request" $status $body_bytes_sent '
                          '"$http_referer" "$http_user_agent" '
                          'X-Cache-Status: $upstream_cache_status '
                          'bytes=$body_bytes_sent host=$host';

# Use this in your server blocks:
# access_log /var/log/nginx/cache.log cache_log;

